//author: Sparrow.jang
//verion: 0.0.1
if(!EH)var EH={};EH.Deferred=function(){var t=function(t){return function(s){return this.hasResult()?(this.result_[this.TASK_MAPPING[t]]||"alway"===t)&&s.apply(null,this.taskParams_):this[t+"Cbs_"].push(s),this}},s=function(){this.doneCbs_=[],this.failCbs_=[],this.alwayCbs_=[],this.result_={}};return s.prototype={TYPES:["resolve","reject"],TASK_MAPPING:{done:"resolve",fail:"reject"},done:t("done"),fail:t("fail"),always:t("alway"),hasEndTask:function(t){return this.result_[this.TASK_MAPPING[t]]?!0:!1},hasResult:function(){var t=this.result_,s=this.TYPES;for(var e in s)if(s[e]in t)return!0;return!1},runTask:function(t,s){for(var e in t){for(var r=null,n=t[e];r=this[n+"Cbs_"].shift();)r.apply(null,s);delete this[n+"Cbs_"]}},resolve:function(){this.hasResult()||(this.result_.resolve=!0,this.taskParams_=arguments,this.runTask(["alway","done"],arguments))},reject:function(){this.hasResult()||(this.result_.reject=!0,this.taskParams_=arguments,this.runTask(["alway","fail"],arguments))}},function(){return new s}}(),"undefined"!=typeof module&&(module.exports=EH.Deferred);